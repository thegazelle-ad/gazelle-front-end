dependencies:
  override:
    - npm install

checkout:
  environment:
    CIRCLECI: true
  post:
    - cp config/database.config.example.js config/database.config.js
    - cp config/s3.config.example.js config/s3.config.js
    - cp config/ghost.config.example.js config/ghost.config.js
    - ./scripts/getGhostConfig.sh


compile:
  override:
    - npm run build-production

test:
  override:
    - npm test
    - npm run lint

deployment:
  beta:
    branch: master
    commands:
      - ./scripts/deployment/deploy-beta.sh
  production:
    branch: stable
    commands:
      - ./scripts/deployment/deploy-production.sh
